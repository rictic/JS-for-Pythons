<!-- 
  Copyright 2010 Google Inc.
 
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
     http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 
  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)
                 Matthew Nowack (mdnowack@gmail.com)
--> 
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
    <title>Javascript for Pythons</title>
    <link rel="stylesheet" type="text/css" href="style/main.css" media="screen, projection" />
    <script type="text/javascript" src="script/jquery-1.4.2.js"></script>    
    <script type="text/javascript" src="script/jquery-easing-1.3.js"></script>
    <script type="text/javascript">
      function show(text, target) {
        var out = $('#' + target);
        out.hide();
        out.html(text);
        out.fadeIn();
      }
    </script>
    <link href="style/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="script/prettify.js"></script>
  </head>
  <body onload="prettyPrint()">
    <div class="presentation">
      <div class="slides">



<div class="slide">
  <section class="center intro">
    <h1>
      Javascript for Pythons
    </h1>
<!--     <p class="quiet">This presentation is an HTML5 website</p> -->
  </section>
</div>
        
<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Who are you?</h1>
      <h2>What are you doing in my house?</h2>
    </hgroup>
  </section>
</div>    


<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Wait no.</h1>
    </hgroup>
  </section>
</div>    


<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Javascript.</h1>
    </hgroup>
  </section>
</div>    


<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Scary?</h1>
    </hgroup>
  </section>
</div>    

<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Not scary!</h1>
    </hgroup>
  </section>
</div>    


<div class="slide">
  <section class='center intro'>
    <hgroup>
      <h1>Very simple!</h1>
    </hgroup>
  </section>
</div>    

<div class="slide">
	<header>
		<h1>Types</h1>
	</header>
	<section>
    <ul class="bullets">
			<li>Array                  </li>
      <li>Boolean                </li>
      <li>Date                   </li>
      <li>Number                 </li>
      <li>String                 </li>
      <li>RegExp                 </li>
      <li>And of course Object and Function</li>
		</ul>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      That's it!*
    </h1>
    <p >*May contain lies</p>
  </section>
</div>


<div class="slide">
	<header>
		<h1>Boolean</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'>
      
      true;
      false;
      //simple, no?
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>String</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'>
      
      "hi"; 
      'hello there';
      //immutable, nothing that would surprise a python
      
      
      
      
      //looping through a string is a little lower level though:
      var s = "hello";
      for (var i = 0; i < s.length; i++) {
      	s.charAt(i);
      }
    </pre>
	</section>
</div>




<div class="slide">
	<header>
		<h1>Number</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      0;        
      1 + 1;    
      1.5 * 10;      
      2e100 > 100000;          //scientific notation!
      010 == 8;                //octal!
      0xdeadbeef > 0xcafebabe  //hex!
      
      //always floating point.  always.  
      //so all of the caveats of working with floating point apply

      //ordinary sized integers work fine, but extreme positive
      //and negative numbers are kinda sloppy
      
      
    </pre>
	</section>
</div>


<div class="slide">
	<header>
		<h1>Date</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      
      new Date() // => Thu, 03 Jun 2010 09:40:03 GMT
      new Date().valueOf() // => 1275558432262
      
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>RegExp</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      
      /abc/.test("I'll use abc somewhere in here") 
      // => true

      "hello world".match(/hello (dolly|world)/)[1] 
      // => "world"
      
      "salutations humans".replace(/human/g, "weakling") 
      //=> "salutations weaklings"
      
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>Array</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      
      [];  
      [1,2,3]; 
      ['a',1,true]
      var a = [1,2,3];
      a.push(4)           //             a is now [1,2,3,4]
      a.pop()             // returns 4.  a is now [1,2,3]
      a.shift()           // returns 1.  a is now [2,3]
      a.unshift("potato") //             a is now ['potato', 2,3]
      a[1]                // returns 2.
      a[1] = 5            //             a is now ['potato', 5, 3]
    </pre>
	</section>
</div>


<div class="slide">
	<header>
		<h1>Object</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      
      var o = {
        "ghastly": ["ghost","psychic"],
        "charizard": ["fire", "dragon"],
        "mudkip": ["water", "useless"]
      }
      
      o.ghastly === o['ghastly']
      o['mud' + 'kip']

      //JSON objects!  A lot like Python dicts 

      //Used a lot like dicts too.
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Syntax
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Pretty bland really
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1>Syntax</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      var a = 0;
      while(a &lt; 100) {
        a += 1;
      }
      
      switch(1+1){
        case 2: 'good!'; break;
        default: 'bad!';
      }
      
      //don't actually need to put quotes around keys
      //in object literals
      var o = {
        ghastly:   ["ghost","psychic"],
        charizard: ["fire", "dragon"],
        mudkip:    ["water", "useless"]
      }
      
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>More Syntax</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js'> 
      for (var i = 10; i > 0; i--) {
        dance();
      }
      
      //like Python, this is
      //special syntax only used for
      //iterating through objects &amp; arrays
      for (var key in o) {
        var value = o[key];
      }
      //unlike Python, it *only* iterates through keys,
      //never through values, so:
      for (var index in ['a','b','c']) {
        alert(index); //pops up 0 then 1 then 2
      }
      
      //everywhere else the 'in' keyword 
      //tests to see if the object has the key
      if (key in o) {
        
      }
        
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      That's pretty much everything!
    </h1>
  </section>
</div>


<div class="slide">
  <section class="center intro">
    <h1>
      ...except Functions, Namespacing, Methods, Classes
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1>A Function!</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function scream() {
        alert("HELLO AND WELCOME TO MY WEB-SITE");
      }
      
      scream();
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>An Argument!</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function scream(name) {
        alert("HELLO AND WELCOME TO MY WEB-SITE " + name);
      }
      
      scream("Steve");
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>All Arguments Are Optional</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function scream(name) {
        alert("HELLO AND WELCOME TO MY WEB-SITE " + name);
      }
      
      scream();
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>All Arguments Are Optional</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function scream(name) {
        alert("HELLO AND WELCOME TO MY WEB-SITE " + (name || "WEB-VISITOR"));
      }
      
      scream();
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>All Arguments Are Optional</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function scream(name, years) {
        alert("HELLO AND WELCOME TO MY WEB-SITE " + (name || "WEB-VISITOR"));
        if (years &amp;&amp; years > 0)
          alert("YOU'VE BEEN ON THE WORLD WIDE WEB TOO LONG FRIEND GET SOME FRESH AIR")
      }
      
      scream("Steve");
      scream("Fooley", 2);
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>Variable Number of Arguments</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      function sum() {
        var result = 0;
        for (var i = 0; i &lt; arguments.length; i++)
          result += arguments[i];
        return result;
      }
      
      print(sum(1,2,3,4))
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Namespaces
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      What's a namespace?
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      You must declare your variables.
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      You MUST declare your variables.
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Or you'll stomp all over the global namespace.
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Fortunately, it's easy.
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Just use <span class='kwd'>var</span>
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1>Scoping</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'> 
      
      //every function is a namespace.  functions are the
      //only way to make a namespace
      //and new variables are added to a namespace with var
      
      var a = 'global';
      function f() {
        var a = 'local';
        function g() {
          a += ' and inner too'
          return a;
        }
        return g;
      }
      
      var inner_g = f();
      inner_g(); //"local and inner too"
      inner_g(); //"local and inner too and inner too"
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Methods
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      What's a method?
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Just a function on an object.
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1>What's a method?</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      //extremely boring object
      var o = {};
      
      o.speak = function() {
        return "kupo";
      }
      
      o.speak(); // "kupo"
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Then where did <br>my <span class='kwd'>self</span> go??
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      ... and who's this shifty looking <span class='kwd'>this</span> character?
    </h1>
  </section>
</div>


<div class="slide">
	<header>
		<h1>Methods</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      //extremely boring object
      var o = {word: "skreee"};
      
      o.speak = function() {
        return this.word;
      }
      
      o.speak(); // "skreee"
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Quick gotcha
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1><span class='kwd'>this</span> and inner functions</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      //extremely boring object
      var o = {word: "skreee"};
      
      o.speak = function() {
        function yell() {
          return this.word.toUpperCase(); //error!
        }
        return yell();
      }
      
      o.speak(); // "skreee"
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Classes
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Ok, class-like behavior
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Every function can be called as a constructor
    </h1>
    <h3>This was a language design mistake, but we've gotta live with it now<h3>
  </section>
</div>

<div class="slide">
	<header>
		<h1>Constructor</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      function Mammal() {
        this.furry = true;
      }
      
      var m = new Mammal();
      m.furry === true;
      
    </pre>
	</section>
</div>


<div class="slide">
	<header>
		<h1>Constructor</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      function Mammal() {
        //this = {};
        //this.__proto__ = Mammal
        this.furry = true;
        //return this
      }
      
      var m = new Mammal();
      m.furry === true;
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>Constructor</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      function Mammal() {
        this.furry = true;
      }
      
      var m = Mammal();
      m === undefined;
      window.furry === true;
      
    </pre>
	</section>
</div>


<div class="slide">
  <section class="center intro">
    <h1>
      Convention for Constructors
    </h1>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <hgroup>
      <h1>
        Prototypes
      </h1>
      <h2>
        Kinda like inheritance
      </h2>
    </hgroup>
  </section>
</div>

<div class="slide">
	<header>
		<h1>Constructor</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      function Mammal() {
        this.furry = true;
      }
      
      function Buffalo() {
        this.size = "huge";
      }
      Buffalo.prototype = new Mammal();
      
      var b = new Buffalo();
      b.furry === true;
      b.size  === "huge";
      
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>Constructor</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      function Mammal() {
        this.furry = true;
      }
      
      function Buffalo() {
        this.size = "huge";
        var k = Math.random();
      }
      Buffalo.prototype = new Mammal();
      Buffalo.prototype.dance = function() {
        if (this.size === "huge")
          alert("oh god he's breaking everything");
      }
      
      var b = new Buffalo();
      b.furry === true;
      b.size  === "huge";
      
    </pre>
	</section>
</div>

<div class="slide">
	<header>
		<h1>Object.create</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       

      Object.create = function create(o) {
      	var F = function () {};
      	F.prototype = o;
      	return new F();
      }


      var mammal = {furry: true};

      var buffalo = Object.create(mammal);

      buffalo.size = "huge";

      var b1 = Object.create(buffalo);
      
    </pre>
	</section>
</div>

<!-- find bounds for integer numbers  -->

<div class="slide">
  <section class="center intro">
    <h1>
      Debugging
    </h1>
    
    <h4>Or: Don't use alerts!</h4>
  </section>
</div>
<div class="slide">
	<header>
		<h1>Web Inspector!</h1>
	</header>
	<section>
    <div>
      <br><br>
      <img src="img/web_inspector.png" width="791" height="255" alt="Web Inspector">
    </div>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Surprises for Pythons
    </h1>
  </section>
</div>

<div class="slide">
	<header>
		<h1>Javascript rarely throws errors</h1>
	</header>
	<section>
    <pre class='prettyprint lang-js runnable'>       
      
      a = [1,2,3]
      a[1000] // returns undefined
      a.length // returns 3
      a[5000] = 10
      a.length // returns 5001
      a[1000] // still undefined

      o = {"ghastly": ["ghost","psychic"],
       "charizard": ["fire", "dragon"],
       "mudkip": ["water", "useless"]
      }
      o.kadabra // undefined
      o['alakazam'] //also undefined
      
    </pre>
	</section>
</div>

<div class="slide">
  <section class="center intro">
    <h1>
      Equality is shallow
    </h1>
  </section>
</div>





<div class="slide">
  <section class="center intro">
    <hgroup>
      <h3><a href="http://code.google.com/p/gmaps-utility-library-dev/wiki/JavascriptCodingConventions">Google Coding Conventions</a></h3>
    </hgroup>
  </section>
</div>

<div class="slide">
  <section class="center intro">
    <hgroup>
      <h1>Fork Me</h1>
      <h3><a href="http://github.com/rictic/javascript-for-pythons">http://github.com/rictic</a></h3>
    </hgroup>
  </section>
</div>
        
      </div> 
    </div> 

    
    <script>
      (function() {
        // Since we don't have the fallback of attachEvent and
        // other IE only stuff we won't try to run JS for IE.
        // It will run though when using Google Chrome Frame
        if (document.all) { return; }

        var currentSlideNo;
        var notesOn = false;
        var slides = document.getElementsByClassName('slide');
        var touchStartX = 0;     
   
        // var slide_hash = window.location.hash.replace(/#/, '');
        // if (slide_hash) {
        //   for (var i = 0, len = slides.length; i < len; i++) {
        //     if (slides[i].id == slide_hash) {
        //       currentSlideNo = i;
        //       updateSlideClasses(); 
        //     }
        //   }
        // }
        
        var spaces = /\s+/, a1 = [""];

        var str2array = function(s) {
          if (typeof s == "string" || s instanceof String) {
            if (s.indexOf(" ") < 0) {
              a1[0] = s;
              return a1;
            } else {
              return s.split(spaces);
            }
          }
          return s;
        };

        var trim = function(str) {
          return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        };

        var addClass = function(node, classStr) {
          classStr = str2array(classStr);
          var cls = " " + node.className + " ";
          for (var i = 0, len = classStr.length, c; i < len; ++i) {
            c = classStr[i];
            if (c && cls.indexOf(" " + c + " ") < 0) {
              cls += c + " ";
            }
          }
          node.className = trim(cls);
        };

        var removeClass = function(node, classStr) {
          var cls;
          if (classStr !== undefined) {
            classStr = str2array(classStr);
            cls = " " + node.className + " ";
            for (var i = 0, len = classStr.length; i < len; ++i) {
              cls = cls.replace(" " + classStr[i] + " ", " ");
            }
            cls = trim(cls);
          } else {
            cls = "";
          }
          if (node.className != cls) {
            node.className = cls;
          }
        };

        var getSlideEl = function(slideNo) {
          if (slideNo > 0) {
            return slides[slideNo - 1];
          } else {
            return null;
          }
        };

        var getSlideTitle = function(slideNo) {
          var el = getSlideEl(slideNo);
          
          if (el) {
            return el.getElementsByTagName('header')[0].innerHTML;
          } else {
            return null;
          }
        };
        
        var changeSlideElClass = function(slideNo, className) {
          var el = getSlideEl(slideNo);

          if (el) {
            removeClass(el, 'far-past past current future far-future');
            addClass(el, className);
          }
        };
        
        var updateSlideClasses = function() {
          window.location.hash = "slide" + currentSlideNo;
          changeSlideElClass(currentSlideNo - 2, 'far-past');
          changeSlideElClass(currentSlideNo - 1, 'past');
          changeSlideElClass(currentSlideNo, 'current');
          changeSlideElClass(currentSlideNo + 1, 'future');
          changeSlideElClass(currentSlideNo + 2, 'far-future');                
        };
        
        var nextSlide = function() {
          if (currentSlideNo < slides.length) {
            currentSlideNo++;
          }
          
          updateSlideClasses();
        };
        
        var prevSlide = function() {
          if (currentSlideNo > 1) {
            currentSlideNo--;
          }
          updateSlideClasses();
        };
        
        var showNotes = function() {
          var notes = document.querySelectorAll('.notes');
          for (var i = 0, len = notes.length; i < len; i++) {
            notes[i].style.display = (notesOn) ? 'none':'block';
          }
          notesOn = (notesOn) ? false:true;
        };

        var switch3D = function() {
          if (document.body.className.indexOf('three-d') == -1) {
            document.getElementsByClassName('presentation')[0].style.webkitPerspective = '1000px';
            document.body.className += ' three-d';
          } else {
            window.setTimeout("document.getElementsByClassName('presentation')[0].style.webkitPerspective = '0';", 2000);
            document.body.className = document.body.className.replace(/three-d/, '');
          }
        };

        var handleBodyKeyDown = function(event) {
          // console.log(event.keyCode);
          switch (event.keyCode) {
            case 37: // left arrow
              prevSlide();
              break;
            case 39: // right arrow
            // case 32: // space
              nextSlide();
              break;
            case 50: // 2
              showNotes();          
              break;
            case 51: // 3
              switch3D();          
              break;
          }
        };

        var addTouchListeners = function() {
          document.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].pageX;
          }, false);
          document.addEventListener('touchend', function(e) {
            var pixelsMoved = touchStartX - e.changedTouches[0].pageX;
            var SWIPE_SIZE = 150;
            if (pixelsMoved > SWIPE_SIZE) {
              nextSlide();
            }
            else if (pixelsMoved < -SWIPE_SIZE) {
             prevSlide();
            }
          }, false);
        };

        // initialize

        (function() {
          if (window.location.hash != "") {
            currentSlideNo = Number(window.location.hash.replace('#slide', ''));
          } else {
            currentSlideNo = 1;
          }
   
          document.addEventListener('keydown', handleBodyKeyDown, false);
   
          var els = slides;
          for (var i = 0, el; el = els[i]; i++) {
            addClass(el, 'slide far-future');
          }
          updateSlideClasses(); 

          // add support for finger events (filter it by property detection?)
          addTouchListeners();
        })();
      })();
    </script>

    <!--[if IE]>
		<script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script> 
		<script>CFInstall.check({ mode: "overlay" });</script> 
    <![endif]--> 
</body>
</html>
